(this["webpackJsonpshop-crud"]=this["webpackJsonpshop-crud"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(21),s=a.n(r),i=(a(48),a(49),a(7)),l=a(4),o=(a(50),a(0)),d=function(){return Object(o.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(o.jsxs)("div",{className:"container-fluid",children:[Object(o.jsx)("a",{className:"navbar-brand",href:"/",children:Object(o.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/1818/1818782.png",width:"60px",alt:""})}),Object(o.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(o.jsx)("span",{className:"navbar-toggler-icon"})}),Object(o.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(o.jsxs)("ul",{className:"navbar-nav  mb-2 mb-lg-0 navbar__links",children:[Object(o.jsx)("li",{className:"nav-item ",children:Object(o.jsx)(i.c,{exact:!0,activeClassName:"my-active",className:"navbar-brand",to:"/",children:"Home"})}),Object(o.jsx)("li",{className:"nav-item ",children:Object(o.jsx)(i.c,{exact:!0,activeClassName:"my-active",className:"navbar-brand",to:"/createProduct",children:"Create"})}),Object(o.jsx)("li",{className:"nav-item ",children:Object(o.jsx)(i.c,{exact:!0,activeClassName:"my-active",className:"navbar-brand",to:"/login",children:"Login"})})]}),Object(o.jsx)("ul",{className:"navbar-nav navbar__links ms-auto",children:Object(o.jsx)("li",{children:Object(o.jsxs)(i.b,{to:"/cart",className:"cart__link",children:[Object(o.jsx)("i",{className:"fas fa-shopping-cart"}),Object(o.jsx)("span",{children:Object(o.jsx)("span",{className:"cartlogo__badge",children:"0"})})]})})})]})]})})},j=(a(57),a(5)),b=(a(58),function(e){var t=e.imageUrl,a=e.description,c=e.price,n=e.name,r=e.productId;return Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("img",{src:t,alt:n,className:"card-img-top"}),Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("p",{className:"card-title",children:n}),Object(o.jsxs)("p",{className:"info__description",children:[a.substring(0,100),"..."]}),Object(o.jsxs)("p",{className:"info__price",children:["$",c]}),Object(o.jsx)(i.b,{to:"/product/".concat(r),className:"btn btn-primary",children:"View"})]})]})})}),u=a(13),m=a.n(u),p=a(17),O="GET_PRODUCTS_REQUEST",h="GET_PRODUCTS_SUCCESS",x="GET_PRODUCTS_FAIL",v="GET_PRODUCT_DETAILS_REQUEST",f="GET_PRODUCT_DETAILS_SUCCESS",g="GET_PRODUCT_DETAILS_FAIL",N="GET_PRODUCT_DETAILS_RESET",y="CREATE_PRODUCT_START",_="CREATE_PRODUCT_SUCCESS",S="CREATE_PRODUCT_FAILURE",C=a(18),T=a.n(C),E=function(e){return function(){var e=Object(p.a)(m.a.mark((function e(t){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:y}),e.next=4,T.a.post("/api/products/createProduct");case 4:a=e.sent,(c=a.data)&&t({type:_,payload:c}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t({type:S,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},I=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.getProducts})),a=t.data,n=t.isLoading,r=t.error;return Object(c.useEffect)((function(){"initial"===n&&e(function(){var e=Object(p.a)(m.a.mark((function e(t){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:O}),e.next=4,T.a.get("/api/products");case 4:a=e.sent,c=a.data,t({type:h,payload:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:x,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e,n]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{className:"homescreen__title",children:"Latest Products"}),Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"row",children:"loading"===n?Object(o.jsx)("h2",{children:"Loading..."}):r?Object(o.jsx)("h2",{children:r}):a.map((function(e){return Object(o.jsx)("div",{className:"col col-md-6 col-lg-4 py-4",children:Object(o.jsx)(b,{name:e.name,description:e.description,price:e.price,imageUrl:e.imageUrl,productId:e._id},e._id)})}))})})]})},w=a(14),k=a(12),R=(a(79),"ADD_TO_CART"),U="REMOVE_FROM_CART",L=function(e,t){return function(){var a=Object(p.a)(m.a.mark((function a(c,n){var r,s;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/api/products/".concat(e));case 2:r=a.sent,s=r.data,c({type:R,payload:{product:s._id,name:s.name,imageUrl:s.imageUrl,price:s.price,countInStock:s.countInStock,qty:t}}),localStorage.setItem("cart",JSON.stringify(n().cart.cartItems));case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},P=function(e){var t=e.match,a=e.history,n=Object(c.useState)(1),r=Object(k.a)(n,2),s=r[0],i=r[1],l=Object(j.b)(),d=Object(j.c)((function(e){return e.getProductDetails})),b=d.loading,u=d.error,O=d.product;Object(c.useEffect)((function(){var e;O&&t.params.id!==O._id&&l((e=t.params.id,function(){var t=Object(p.a)(m.a.mark((function t(a){var c,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:v}),t.next=4,T.a.get("/api/products/".concat(e));case 4:c=t.sent,n=c.data,a({type:f,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:g,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[l,t,O]);return Object(o.jsxs)("div",{className:"productscreen",children:[Object(o.jsx)("h1",{className:"text-center",children:"Ecomerce"}),b?Object(o.jsx)("h2",{children:"Loading..."}):u?Object(o.jsx)("h2",{children:u}):Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"container card-width",children:Object(o.jsx)("div",{className:"card-group",children:Object(o.jsx)("div",{className:"card h-100  shadow-sm ",children:Object(o.jsxs)("div",{className:"row g-0",children:[Object(o.jsx)("div",{className:"col-md-4",children:Object(o.jsx)("img",{src:O.imageUrl,alt:O.name,className:"img-fluid rounded-start "})}),Object(o.jsx)("div",{className:"col col-md-8 ",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsxs)("div",{className:"clearfix mb-3",children:[" ",Object(o.jsx)("span",{className:"float-start badge rounded-pill bg-primary",children:O.name})," ",Object(o.jsxs)("span",{className:"float-end price-hp",children:["$",O.price]})," "]}),Object(o.jsx)("h5",{className:"card-title",children:O.description}),Object(o.jsxs)("p",{children:["Status:",Object(o.jsx)("span",{children:O.countInStock>0?"In Stock":"Out of Stock"})]}),Object(o.jsxs)("div",{className:"clearfix d-flex justify-content-end",children:[Object(o.jsx)("div",{children:Object(o.jsxs)("p",{className:"me-3 align-middle",children:["Qty",Object(o.jsx)("select",{value:s,onChange:function(e){return i(e.target.value)},children:Object(w.a)(Array(O.countInStock).keys()).map((function(e){return Object(o.jsx)("option",{value:e+1,children:e+1},e+1)}))})]})}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn  btn-circle",onClick:function(){l(L(O._id,s)),a.push("/cart")},children:Object(o.jsx)("i",{className:"fas fa-shopping-cart"})})})]})]})})]})})})})})]})},D=(a(80),a(81),function(e){var t=e.item,a=e.qtyChangeHandler,c=e.removeHandler;return Object(o.jsxs)("div",{className:"cartitem",children:[Object(o.jsx)("div",{className:"cartitem__image",children:Object(o.jsx)("img",{src:t.imageUrl,alt:t.name,width:"260px"})}),Object(o.jsx)(i.b,{to:"/product/".concat(t.product),className:"cartItem__name",children:Object(o.jsx)("p",{children:t.name})}),Object(o.jsxs)("p",{className:"cartitem__price",children:["$",t.price]}),Object(o.jsx)("select",{value:t.qty,onChange:function(e){return a(t.product,e.target.value)},className:"cartItem__select",children:Object(w.a)(Array(t.countInStock).keys()).map((function(e){return Object(o.jsx)("option",{value:e+1,children:e+1},e+1)}))}),Object(o.jsx)("button",{className:"cartItem__deleteBtn",onClick:function(){return c(t.product)},children:Object(o.jsx)("i",{className:"fas fa-trash"})})]})}),A=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.cart})).cartItems;Object(c.useEffect)((function(){}),[]);var a=function(t,a){e(L(t,a))},n=function(t){e(function(e){return function(t,a){t({type:U,payload:e}),localStorage.setItem("cart",JSON.stringify(a().cart.cartItems))}}(t))};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"cartscreen",children:Object(o.jsx)("div",{className:"cartscreen__left",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col col-md-8 col-lg-8",children:[Object(o.jsx)("h2",{children:"Shopping Cart"}),0===t.length?Object(o.jsxs)("div",{children:["Your Cart Is Empty ",Object(o.jsx)(i.b,{to:"/",children:"Go Back"})]}):t.map((function(e){return Object(o.jsx)(D,{item:e,qtyChangeHandler:a,removeHandler:n},e.product)}))]}),Object(o.jsxs)("div",{className:"cartscreen__right col col-md-4 col-lg-4",children:[Object(o.jsxs)("div",{className:"cartscreen__info",children:[Object(o.jsxs)("p",{children:["Subtotal (",t.reduce((function(e,t){return Number(t.qty)+e}),0),") items"]}),Object(o.jsxs)("p",{children:["$",t.reduce((function(e,t){return e+t.price*t.qty}),0).toFixed(2)]})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{children:"Proceed To Checkout"})})]})]})})})})},F=a(24),G=a(2),q=a(6),H=(Object(q.a)(),"LOGIN_USER"),J="".concat(H,"_INIT"),B="".concat(H,"_SUCCESS"),M="".concat(H,"_ERROR"),$=function(e,t){var a=e.username,c=e.password;return function(e){e({type:J});var n=function(t){e({type:M,payload:t})};try{fetch("https://mock-server-dl.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:c})}).then((function(e){return e.json()})).then((function(c){c.jwt?(localStorage.jwt=c.jwt,function(t){e({type:B,payload:t})}(a),t()):n(c.error)}))}catch(r){n(r)}}},Q=function(e){e.isLoading;var t=Object(j.c)((function(e){return e.users.loadingUsers})),a=Object(l.f)(),n=Object(c.useState)({username:"",password:"",email2:"email2"}),r=Object(k.a)(n,2),s=r[0],i=r[1],d=Object(j.b)(),b=function(e){var t=e.target;i(Object(G.a)(Object(G.a)({},s),{},Object(F.a)({},t.name,t.value)))},u=function(){return a.push("/users")};return Object(o.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),d($(s,u))},children:[Object(o.jsx)("div",{className:"card",children:Object(o.jsx)("input",{id:"username",name:"username",className:"form-control username",placeholder:"username",onChange:b,value:s.username})}),Object(o.jsx)("div",{className:"card",children:Object(o.jsx)("input",{name:"email",className:"form-control email d-none",placeholder:"email2",onChange:b,value:s.email2})}),Object(o.jsx)("div",{className:"card",children:Object(o.jsx)("input",{id:"password",name:"password",className:"form-control",placeholder:"Password",type:"password",onChange:b,value:s.password})}),Object(o.jsx)("div",{className:"card",children:Object(o.jsx)("button",{id:"buttonSubmit",className:"btn btn-primary",color:"primary",disabled:t,type:"submit",children:t?"Loading...":"Submite"})})]})},V=function(e){var t=Object(c.useState)(e),a=Object(k.a)(t,2),n=a[0],r=a[1];return[n,function(e){var t=e.target.value;r(t)}]};var W=function(){var e=V(""),t=Object(k.a)(e,2),a=t[0],n=t[1],r=V(""),s=Object(k.a)(r,2),i=s[0],d=s[1],b=V(""),u=Object(k.a)(b,2),m=u[0],p=u[1],O=V(""),h=Object(k.a)(O,2),x=h[0],v=h[1],f=V(""),g=Object(k.a)(f,2),N=g[0],y=g[1],_=Object(j.b)(),S=Object(l.f)();return Object(c.useEffect)((function(){_(E())}),[_]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{className:"text-center",children:"Create new product"}),Object(o.jsx)("div",{className:"container px-5",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_(E()),S.push("/")},children:[Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{className:"form-label",children:"Name"}),Object(o.jsx)("input",{type:"text",className:"form-control",value:a,onChange:n})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{className:"form-label",children:"Description"}),Object(o.jsx)("input",{type:"text",className:"form-control",value:i,onChange:d})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{className:"form-label",children:"Price"}),Object(o.jsx)("input",{type:"number",className:"form-control",value:m,onChange:p})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{className:"form-label",children:"Stock"}),Object(o.jsx)("input",{type:"number",className:"form-control",value:x,onChange:v})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{className:"form-label",children:"Img"}),Object(o.jsx)("input",{type:"text",className:"form-control",value:N,onChange:y})]}),Object(o.jsx)("div",{className:"d-grid gap-2",children:Object(o.jsx)("button",{className:"btn btn-primary ",type:"submit",children:"\ud83d\udcbe Save"})})]})})]})};var Y=function(){return Object(o.jsx)("div",{children:Object(o.jsxs)(i.a,{children:[Object(o.jsx)(d,{}),Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{exact:!0,path:"/",children:Object(o.jsx)(I,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/product/:id",component:P}),Object(o.jsx)(l.a,{exact:!0,path:"/cart",component:A}),Object(o.jsx)(l.a,{exact:!0,path:"/login",children:Object(o.jsx)(Q,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/createProduct",children:Object(o.jsx)(W,{})})]})]})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,105)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))},K=(a(82),a(83),a(16)),X=a(42),Z=a(43),ee={cartItems:[]},te={data:{},error:null,success:null,loading:!1},ae=Object(K.combineReducers)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:var a=t.payload,c=e.cartItems.find((function(e){return e.product===a.product}));return c?Object(G.a)(Object(G.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===c.product?a:e}))}):Object(G.a)(Object(G.a)({},e),{},{cartItems:[].concat(Object(w.a)(e.cartItems),[a])});case U:return Object(G.a)(Object(G.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});default:return e}},getProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],isLoading:"initial"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(G.a)(Object(G.a)({},e),{},{isLoading:"loading",data:[]});case h:return Object(G.a)(Object(G.a)({},e),{},{data:t.payload,isLoading:"iddle"});case x:return Object(G.a)(Object(G.a)({},e),{},{isLoading:"iddle",error:t.payload});case y:return Object(G.a)(Object(G.a)({},e),{},{isLoading:"loading"});case _:return Object(G.a)(Object(G.a)({},e),{},{isLoading:"succeeded",data:[].concat(Object(w.a)(e.data),[t.payload])});case S:return Object(G.a)(Object(G.a)({},e),{},{isLoading:"failed"});default:return e}},getProductDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case f:return Object(G.a)(Object(G.a)({},e),{},{loading:!1,product:t.payload});case g:return Object(G.a)(Object(G.a)({},e),{},{loading:!1,error:t.payload});case N:return Object(G.a)(Object(G.a)({},e),{},{product:{}});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case B:return Object(G.a)(Object(G.a)({},e),{},{data:t.payload,error:!1,success:!0,loading:!1});case M:return Object(G.a)(Object(G.a)({},e),{},{error:t.payload,success:!1,loading:!1});default:return e}}}),ce=[Z.a],ne=K.applyMiddleware.apply(void 0,ce),re=Object(K.createStore)(ae,Object(X.composeWithDevTools)(ne));s.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(j.a,{store:re,children:Object(o.jsx)(Y,{})})}),document.getElementById("root")),z()},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.5f00d084.chunk.js.map